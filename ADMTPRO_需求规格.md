# ADMTPRO 需求规格

> 说明：以下内容为“默认方案 + 最佳实践”整理的完整规格文档，已包含新增功能：密码到期提醒与“忘记密码”流程。

---

## 1. 项目概述

- 项目名称：ADMTPRO
- 架构：BS 架构、前后端分离、单体应用
- 运行环境：Docker Compose
- 开发语言：后端 Python 3.12；前端 TypeScript
- 框架：Flask

---

## 2. 角色与权限划分

- 普通用户
  - 默认入口登录
  - 仅查看自身信息：姓名/邮箱/手机号
  - 可自助修改密码
  - 可通过“忘记密码”短信流程重置密码

- 管理员
  - 独立入口登录
  - 管理用户与 OU（CRUD）
  - 重置用户密码
  - OTP 二次验证登录

- 审计员（补充）
  - 仅可查看审计日志

---

## 3. 核心功能清单

### 3.1 权限与登录
- 普通用户默认入口登录
- 管理员独立入口登录
- 管理员需 OTP 二次验证

### 3.2 用户功能
- 普通用户查看自身信息：姓名/邮箱/手机号
- 普通用户自助修改密码（需旧密码 + 短信验证码）
- “忘记密码”流程：短信验证后修改密码

### 3.3 管理员功能
- 用户管理：增删改查、启用/禁用、重置密码
- OU 管理：增删改查、移动用户

### 3.4 二次验证
- 普通用户忘记密码/改密短信验证码（阿里云短信）
- 管理员 OTP 二次验证登录

### 3.5 日志审计
- 所有 DDL 操作必须记录
- 审计支持筛选与导出

### 3.6 密码到期提醒（新增）
- 读取 AD 到期时间或策略计算
- 提前 7/3/1 天提醒
- 站内通知 + 可选短信

---

## 4. 需求补充（默认开启）

- 搜索与过滤（按 OU、状态、邮箱、部门、岗位）
- 配置中心（LDAP/短信/OTP/日志/提醒阈值）
- 系统健康检查（AD/短信通道）
- 只读降级（AD 不可用时）

---
